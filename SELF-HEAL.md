# ğŸ¤– OpenClaw Self-Healing Keepalive System

> **æå®¢ç‰ˆè‡ªæ•‘æ´»ç³»ç»Ÿ** - å¤šå±‚é˜²æŠ¤ï¼Œè‡ªåŠ¨ä¿®å¤ï¼Œæ°¸ä¸å®•æœº

---

## ğŸ¯ ç‰¹æ€§

### ğŸ”¥ æ ¸å¿ƒåŠŸèƒ½

| åŠŸèƒ½ | æè¿° |
|------|------|
| **çœ‹é—¨ç‹—ç›‘æ§** | æ¯ 30 ç§’æ£€æŸ¥å…³é”®è¿›ç¨‹çŠ¶æ€ |
| **è‡ªåŠ¨ä¿®å¤** | æ£€æµ‹åˆ°å¤±è´¥åè‡ªåŠ¨é‡å¯æœåŠ¡ |
| **å¤šå±‚é˜²æŠ¤** | æœ¬åœ°æœåŠ¡ + GitHub Actions + æµè§ˆå™¨ä¿æ´» |
| **ç½‘ç»œå¿ƒè·³** | å¤šç«¯ç‚¹å¿ƒè·³æ£€æµ‹ |
| **ç»ˆç«¯æ´»åŠ¨** | æ¨¡æ‹Ÿç»ˆç«¯æ´»åŠ¨é˜²æ­¢é—²ç½® |
| **çŠ¶æ€é¢æ¿** | æå®¢é£æ ¼ TUI çŠ¶æ€ç›‘æ§ |

### ğŸ›¡ï¸ é˜²æŠ¤å±‚çº§

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Layer 5: GitHub Actions (æ¯ 10 åˆ†é’Ÿ)                     â”‚
â”‚  - Push è§¦å‘                                            â”‚
â”‚  - Cron è°ƒåº¦                                            â”‚
â”‚  - åˆ›å»ºæ´»åŠ¨è®°å½•                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Layer 4: çœ‹é—¨ç‹—æœåŠ¡ (æ¯ 30 ç§’æ£€æŸ¥)                       â”‚
â”‚  - è¿›ç¨‹ç›‘æ§                                             â”‚
â”‚  - è‡ªåŠ¨ä¿®å¤                                             â”‚
â”‚  - å¥åº·æŠ¥å‘Š                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Layer 3: ä¿æ´»æœåŠ¡ (æ¯ 5 åˆ†é’Ÿ)                            â”‚
â”‚  - GitHub API å¿ƒè·³                                      â”‚
â”‚  - æœ¬åœ°ç«¯å£æ£€æµ‹                                         â”‚
â”‚  - æ—¥å¿—è®°å½•                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Layer 2: ç½‘ç»œå¿ƒè·³ (æ¯ 60 ç§’)                             â”‚
â”‚  - å¤šç«¯ç‚¹æ£€æµ‹                                           â”‚
â”‚  - è¶…æ—¶å®¹é”™                                             â”‚
â”‚  - æ–‡ä»¶ç³»ç»Ÿæ´»åŠ¨                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Layer 1: .bashrc è‡ªå¯                                   â”‚
â”‚  - ä¼šè¯å¯åŠ¨æ—¶è‡ªåŠ¨è¿è¡Œ                                   â”‚
â”‚  - æ— æ„Ÿå¯åŠ¨                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å¯åŠ¨è‡ªæ•‘æ´»ç³»ç»Ÿ

```bash
cd /home/codespace/.openclaw/workspace
./scripts/self-heal.sh start
```

### æŸ¥çœ‹çŠ¶æ€

```bash
# å‘½ä»¤è¡ŒçŠ¶æ€
./scripts/self-heal.sh status

# äº¤äº’å¼é¢æ¿ï¼ˆæ¨èï¼‰
./scripts/alive-dashboard.sh --interactive
```

### åœæ­¢

```bash
./scripts/self-heal.sh stop
```

---

## ğŸ“‹ å‘½ä»¤å‚è€ƒ

### self-heal.sh

```bash
./scripts/self-heal.sh {start|stop|restart|status|check|heal}

å‘½ä»¤:
  start   - å¯åŠ¨çœ‹é—¨ç‹—
  stop    - åœæ­¢çœ‹é—¨ç‹—
  restart - é‡å¯çœ‹é—¨ç‹—
  status  - æ˜¾ç¤ºçŠ¶æ€
  check   - æ‰§è¡Œä¸€æ¬¡å¥åº·æ£€æŸ¥
  heal    - æ‰‹åŠ¨è§¦å‘ä¿®å¤
```

### alive-dashboard.sh

```bash
./scripts/alive-dashboard.sh [--interactive|--once]

é€‰é¡¹:
  --interactive, -i  äº¤äº’å¼ TUI é¢æ¿
  --once, -o         æ˜¾ç¤ºä¸€æ¬¡çŠ¶æ€
```

---

## ğŸ”§ é…ç½®

### ç¯å¢ƒå˜é‡

| å˜é‡ | é»˜è®¤å€¼ | æè¿° |
|------|--------|------|
| `CODESPACE_PORT` | 18789 | Codespace æœ¬åœ°ç«¯å£ |

### é…ç½®æ–‡ä»¶

- **æ—¥å¿—ç›®å½•**: `logs/`
- **PID æ–‡ä»¶**: `.keepalive.pid`, `.watchdog.pid`
- **å¥åº·æ–‡ä»¶**: `.health.json`

---

## ğŸ“Š ç›‘æ§æŒ‡æ ‡

### è¿›ç¨‹çŠ¶æ€

- OpenClaw Gateway
- Keepalive Service
- Self-Heal Watchdog

### ç½‘ç»œç«¯ç‚¹

- GitHub API
- Google
- Cloudflare

### æ–‡ä»¶ç³»ç»Ÿ

- PID æ–‡ä»¶æœ‰æ•ˆæ€§
- å¥åº·æ–‡ä»¶æ›´æ–°æ—¶é—´
- æ—¥å¿—æ–‡ä»¶å¤§å°

---

## ğŸ› æ•…éšœæ’æŸ¥

### æŸ¥çœ‹æ—¥å¿—

```bash
# è‡ªæ•‘æ´»æ—¥å¿—
tail -f logs/self-heal.log

# çœ‹é—¨ç‹—è¾“å‡º
tail -f logs/watchdog.out.log

# ä¿æ´»æœåŠ¡æ—¥å¿—
tail -f logs/keepalive-service.log
```

### æ‰‹åŠ¨ä¿®å¤

```bash
# å¼ºåˆ¶ä¿®å¤æ‰€æœ‰æœåŠ¡
./scripts/self-heal.sh heal

# é‡å¯æ‰€æœ‰æœåŠ¡
./scripts/self-heal.sh restart
```

### æ£€æŸ¥ GitHub Actions

```bash
# æŸ¥çœ‹æœ€è¿‘çš„è¿è¡Œ
gh run list --limit 5

# æ‰‹åŠ¨è§¦å‘
gh workflow run codespace-keepalive.yml
```

---

## ğŸ® äº¤äº’å¼é¢æ¿

è¿è¡Œ `./scripts/alive-dashboard.sh --interactive` è¿›å…¥äº¤äº’å¼é¢æ¿ï¼š

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                                                               â•‘
â•‘   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ•—   â–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•—  â–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—     â•‘
â•‘  â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â•šâ•â•â–ˆâ–ˆâ•”â•â•â•â–ˆâ–ˆâ•”â•â•â•â•â•â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â•â•â•â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—    â•‘
â•‘  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•    â•‘
â•‘  â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â•  â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—    â•‘
â•‘  â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•   â–ˆâ–ˆâ•‘   â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘    â•‘
â•‘  â•šâ•â•  â•šâ•â• â•šâ•â•â•â•â•â•    â•šâ•â•    â•šâ•â•â•â•â•â•â•šâ•â•  â•šâ•â•â•šâ•â•â•â•â•â•â•â•šâ•â•  â•šâ•â•    â•‘
â•‘                                                               â•‘
â•‘              ğŸ¤– Self-Healing Keepalive System ğŸ¤–              â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
  ğŸ“Š SYSTEM STATUS
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
  â— OpenClaw Gateway RUNNING (PID: 3190, Uptime: 5:23)
  â— Keepalive Service RUNNING (PID: 4628, Uptime: 3:45)
  â— Self-Heal Watchdog RUNNING (PID: 7197, Uptime: 0:12)

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
  ğŸŒ NETWORK STATUS
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
  â— GitHub API OK (200, 45ms)
  â— Google OK (200, 120ms)
  â— Cloudflare OK (200, 30ms)

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
  ğŸ® QUICK ACTIONS
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
  [1] Start Self-Heal    [2] Stop Self-Heal
  [3] Restart All        [4] Force Heal
  [5] View Full Logs     [0] Exit
```

---

## ğŸ“ˆ æ€§èƒ½å½±å“

| ç»„ä»¶ | CPU | å†…å­˜ | ç½‘ç»œ |
|------|-----|------|------|
| çœ‹é—¨ç‹— | <1% | ~5MB | æ¯ 60 ç§’ |
| ä¿æ´»æœåŠ¡ | <1% | ~50MB | æ¯ 5 åˆ†é’Ÿ |
| GitHub Actions | 0 | 0 | æ¯ 10 åˆ†é’Ÿ |

---

## ğŸ”— ç›¸å…³æ–‡æ¡£

- [KEEPALIVE.md](./KEEPALIVE.md) - åŸºç¡€ä¿æ´»æ–‡æ¡£
- [KEEPALIVE-TROUBLESHOOTING.md](./KEEPALIVE-TROUBLESHOOTING.md) - æ•…éšœæ’æŸ¥

---

## ğŸ“ æ›´æ–°æ—¥å¿—

### v2.0 - Self-Healing Edition

- âœ… æ·»åŠ çœ‹é—¨ç‹—ç›‘æ§
- âœ… è‡ªåŠ¨ä¿®å¤åŠŸèƒ½
- âœ… äº¤äº’å¼çŠ¶æ€é¢æ¿
- âœ… å¤šå±‚é˜²æŠ¤æœºåˆ¶
- âœ… æ”¹è¿›æ—¥å¿—ç³»ç»Ÿ

### v1.0 - Initial

- âœ… åŸºç¡€ä¿æ´»æœåŠ¡
- âœ… GitHub Actions é›†æˆ
- âœ… .bashrc è‡ªå¯

---

**Made with â¤ï¸ by OpenClaw**
